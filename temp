import org.junit.jupiter.api.Test;
import static org.assertj.core.api.Assertions.assertThatThrownBy;
import java.lang.reflect.Method;

class CFTClientAPITest {

    @Test
    void createSecureHttpClient_throwsRuntimeException_whenSslContextFails() throws Exception {
        // We subclass CFTClientAPI and override a method used in the try block
        CFTClientAPI api = new CFTClientAPI() {
            @Override
            protected javax.net.ssl.SSLContext buildSslContext() throws Exception {
                throw new IllegalStateException("Simulated failure");
            }
        };

        // Expect RuntimeException from the catch block
        assertThatThrownBy(api::createSecureHttpClient)
                .isInstanceOf(RuntimeException.class)
                .hasMessageContaining("Error creating secure HTTP client")
                .hasCauseInstanceOf(IllegalStateException.class);
    }
}
