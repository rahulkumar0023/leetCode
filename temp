package com.yourcompany.yourapp.service;

import com.yourcompany.yourapp.model.Supplier;
import com.yourcompany.yourapp.repository.SupplierRepository;
import org.springframework.stereotype.Service;

import jakarta.annotation.PostConstruct;
import java.util.HashMap;
import java.util.Map;

@Service
public class SupplierService {

    private final SupplierRepository supplierRepository;
    private final Map<String, Supplier> supplierMap = new HashMap<>();

    public SupplierService(SupplierRepository supplierRepository) {
        this.supplierRepository = supplierRepository;
    }

    @PostConstruct
    public void loadSuppliers() {
        supplierRepository.findAll().forEach(supplier ->
            supplierMap.put(supplier.getEnterpriseNumber(), supplier)
        );
    }

    public boolean isKnownSupplier(String enterpriseNumber) {
        return enterpriseNumber != null && supplierMap.containsKey(enterpriseNumber);
    }

    public Supplier getByEnterpriseNumber(String enterpriseNumber) {
        return supplierMap.get(enterpriseNumber);
    }
}
