@ExtendWith(MockitoExtension.class)
class JobSchedulerTest {

    @Mock
    private JobLauncher jobLauncher;

    @Mock
    private Job invoiceJob;

    @InjectMocks
    private JobScheduler scheduler;

    @Test
    void shouldRunInvoiceJob() throws Exception {
        when(jobLauncher.run(eq(invoiceJob), any())).thenReturn(mock(JobExecution.class));

        scheduler.runJob();

        verify(jobLauncher, times(1)).run(eq(invoiceJob), any(JobParameters.class));
    }

    @Test
    void shouldThrowExceptionIfJobFails() throws Exception {
        when(jobLauncher.run(any(), any())).thenThrow(new JobExecutionException("Fail"));

        assertThrows(RuntimeException.class, () -> scheduler.runJob());
    }
}
